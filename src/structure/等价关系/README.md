# 等价关系

啥叫等价关系？等价关系叫等价关系，生活中的等价的概念就很明了，不过要用数学语言来描述。

啥叫等价类？一个关系的集合`R`，对于它里面所表示的各条等价关系，从中找出相互等价的所有元素，这些元素组成的集合就叫做等价类。

举个例子：关系集合`R`里有这些等价关系：`(a,b), (b,c), (c,d), (e,f), (f,g)`，那么这个集合`R`里可以得出两个等价类`{a,b,c,d}`和`{e,f,g}`，每个元素都在里面，并且每个等价类都包含了所有属于它的元素了

## 离线等价类

给定n个元素和等价关系的集合R，将n个元素所有的等价类都找出来，就像上面的例子那样，最终能得到2个等价类。离线等价类问题就是研究如何确定所有的等价类的问题。

## 在线等价类

就是并查集问题。并查集简单说就是找朋友，把所有的人分成几组，每组内的人都是朋友。一个人不能同时在两个组里。或者组团打架，别打到自己人

```js
function init(n) {
  var arr = []
  for(var i = 0; i<n;i++) {
    arr[i] = i;
  }
}
```

`init`方法对`n`个元素进行了初始化。`n`个元素分别编号`0，1，2，，，n-1`，初始时让每个人都认自己当大哥。这时候每个人都是一个独立的组。

```js
function union(i,j) {
  var x = find(i) // find 找老大
  var y = find(j)
  if (x == y) {
    // 同一个老大，啥也不用做了
  } else {
    // 不一个老大，帮派不一样
    arr[x] = y // arr[y] = x 也行，没关系的。
  }
}
```

`union`对`i`和`j`进行联合，让他们成为一组。找出他们各自的老大，如果老大是同一个，那就说明他们在一个组里，不需要联合了。如果老大不是同一个，就让他们一个的老大拜另一个的老大当老大，这样他们又是一个老大了，就在一个组里了。【这么做可以是因为关注的点是他们在不在一个组，而不管在这个组里是第几层的小弟。】

```js
function find(x) {
  var r = x;
  while(arr[r] != r) {
    r = arr[r];
  }
  return r;
}
```

`find`找`x`这支上的老大，老大的特点是**老大的老大是自己**

以上就是最简单的并查集的方法。